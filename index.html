<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EvoluSer - Comunidad de Evonautas</title>
    <!-- Metadatos importantes para mÃ³viles -->
    <meta name="theme-color" content="#005691">
    
    <!-- LibrerÃ­as Externas (Tailwind, Fuentes, Iconos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

    <script>
        // ConfiguraciÃ³n de Colores Corporativos y Animaciones
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBlue: '#005691',
                        brandBlueLight: '#007ccb',
                        brandGreen: '#7AB800',
                        brandGreenLight: '#9bd81a',
                        brandDark: '#0f172a',
                        brandAmber: '#d97706',
                    },
                    fontFamily: {
                        heading: ['Montserrat', 'sans-serif'],
                        body: ['Open Sans', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'glow-entrance': 'glowEntrance 1.5s ease-out forwards',
                        'shimmer-text': 'shimmer 3s infinite linear',
                        'pop-in': 'popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                        'float-avatar': 'floatAvatar 4s ease-in-out infinite',
                        'crystal-shine': 'crystalShine 8s infinite',
                        'leaf-wind': 'leaf-wind 2s ease-in-out infinite',
                        'hug': 'group-hug 1.5s ease-in-out infinite',
                        'tractor': 'tractor-move 0.5s linear infinite',
                        'shield': 'shield-guard 2s ease-in-out infinite',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        floatAvatar: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-8px)' } },
                        glowEntrance: { '0%': { opacity: 0, transform: 'scale(0.9) translateY(20px)', filter: 'blur(10px)' }, '100%': { opacity: 1, transform: 'scale(1) translateY(0)', filter: 'blur(0)' } },
                        shimmer: { '0%': { backgroundPosition: '-200% center' }, '100%': { backgroundPosition: '200% center' } },
                        popIn: { '0%': { opacity: 0, transform: 'scale(0.5) translateY(50px)' }, '100%': { opacity: 1, transform: 'scale(1) translateY(0)' } },
                        crystalShine: { '0%, 40%': { left: '-150%', opacity: '0' }, '50%': { opacity: '0.5' }, '60%': { left: '150%', opacity: '0' }, '100%': { left: '150%', opacity: '0' } },
                        'leaf-wind': { '0%, 100%': { transform: 'rotate(0deg)' }, '25%': { transform: 'rotate(15deg)' }, '50%': { transform: 'rotate(-10deg)' }, '75%': { transform: 'rotate(5deg)' } },
                        'group-hug': { '0%, 100%': { transform: 'scale(1)' }, '50%': { transform: 'scale(0.9)' } },
                        'tractor-move': { '0%': { transform: 'rotate(0deg)' }, '25%': { transform: 'rotate(-2deg)' }, '75%': { transform: 'rotate(2deg)' }, '100%': { transform: 'rotate(0deg)' } },
                        'shield-guard': { '0%, 100%': { transform: 'scale(1)' }, '50%': { transform: 'scale(1.1)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            font-family: 'Open Sans', sans-serif; 
            background-color: #f0f4f8; 
            overflow-x: hidden; 
            cursor: none; 
            min-height: 100vh;
        }
        
        @media (hover: none) {
            body { cursor: auto; }
            #custom-cursor { display: none; }
        }

        .cinematic-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden;
        }
        .cinematic-bg::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?q=80&w=2832&auto=format&fit=crop');
            background-size: cover; background-position: center;
            animation: kenBurns 120s infinite alternate ease-in-out;
        }
        .cinematic-bg::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 0%, rgba(0, 86, 145, 0.1) 60%, rgba(122, 184, 0, 0.1) 100%);
        }
        @keyframes kenBurns { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }

        #particles-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        
        .glass-card { 
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.9); 
            box-shadow: 0 20px 60px rgba(0, 50, 100, 0.15); 
        }
        
        .logo-card {
            background: rgba(255, 255, 255, 0.95); border-radius: 1.5rem;
            box-shadow: 0 15px 35px -5px rgba(0, 86, 145, 0.15), 0 0 20px rgba(255, 255, 255, 0.8) inset;
            border: 1px solid rgba(255, 255, 255, 1); display: inline-block; padding: 2rem;
            min-width: 300px; position: relative; z-index: 10; overflow: hidden; backdrop-filter: blur(10px);
        }
        .logo-card::after {
            content: ''; position: absolute; top: 0; left: -150%; width: 150%; height: 100%;
            background: linear-gradient(120deg, transparent 20%, rgba(255, 255, 255, 0.8) 40%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.8) 60%, transparent 80%);
            transform: skewX(-25deg); animation: crystal-shine 6s infinite; pointer-events: none;
        }
        
        .logo-glow {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 160%; height: 160%; background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 60%);
            z-index: -1; filter: blur(40px); animation: pulse-slow 4s infinite;
        }

        #custom-cursor {
            position: fixed; top: 0; left: 0; width: 30px; height: 30px;
            pointer-events: none; z-index: 9999; transform: translate(-50%, -50%);
            transition: transform 0.05s ease-out; display: flex; align-items: center; justify-content: center;
        }
        #custom-cursor::before {
            content: ''; position: absolute; width: 40px; height: 40px;
            background: radial-gradient(circle, rgba(122, 184, 0, 0.4) 0%, transparent 70%);
            border-radius: 50%; z-index: -1;
        }

        .neon-3d-wrapper {
            font-family: 'Montserrat', sans-serif; font-weight: 800; text-transform: uppercase;
            perspective: 1200px; display: flex; justify-content: center; flex-wrap: wrap; gap: 0.6em; 
        }
        .neon-word { display: flex; white-space: nowrap; }
        .neon-letter {
            display: inline-block; color: #ffffff; position: relative; transform-style: preserve-3d;
            animation: elegant-spin 8s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            text-shadow: 0 2px 15px rgba(0, 86, 145, 0.6); 
        }
        @keyframes elegant-spin {
            0%, 85% { transform: rotateY(0deg); color: #ffffff; text-shadow: 0 2px 15px rgba(0, 86, 145, 0.6); }
            92% { color: #9bd81a; text-shadow: 0 0 25px rgba(155, 216, 26, 0.8), 0 0 10px #ffffff; }
            100% { transform: rotateY(360deg); color: #ffffff; text-shadow: 0 2px 15px rgba(0, 86, 145, 0.6); }
        }

        .metal-icon {
            background-clip: text; -webkit-background-clip: text; color: transparent;
            filter: drop-shadow(2px 4px 3px rgba(0,0,0,0.2)); background-size: 200% 200%; transition: all 0.3s ease;
        }
        .metal-blue { background-image: linear-gradient(135deg, #003056 0%, #005691 25%, #4dabf7 50%, #005691 75%, #002040 100%); }
        .metal-gray { background-image: linear-gradient(135deg, #2d3436 0%, #636e72 25%, #b2bec3 50%, #636e72 75%, #2d3436 100%); }
        .metal-green { background-image: linear-gradient(135deg, #2f5d02 0%, #5c8d03 25%, #b2f243 50%, #5c8d03 75%, #204000 100%); }
        .metal-amber { background-image: linear-gradient(135deg, #78350f 0%, #d97706 25%, #fbbf24 50%, #d97706 75%, #451a03 100%); }

        .chat-bubble {
            position: relative; background: #ffffff; border-radius: 1.5rem; padding: 1.25rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); margin-bottom: 2rem; 
            border-bottom-right-radius: 0; transition: all 0.3s ease-in-out;
        }
        .chat-bubble::after {
            content: ''; position: absolute; bottom: -10px; right: 20px; width: 0; height: 0;
            border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 15px solid #ffffff;
        }
        
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        .wandering-rocket {
            position: fixed; z-index: 1; font-size: 3rem; pointer-events: none;
            opacity: 0; transition: transform linear, opacity 1s ease-in-out;
            filter: drop-shadow(0 0 15px rgba(122, 184, 0, 0.6));
        }
        .wandering-rocket i {
            background: linear-gradient(135deg, #005691 0%, #7AB800 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: block;
        }
    </style>
</head>
<body class="text-gray-700 antialiased min-h-screen flex flex-col relative">
    <div id="custom-cursor"><i class="fas fa-leaf text-brandGreen text-opacity-90 text-xl transform -rotate-45 drop-shadow-md"></i></div>
    <div class="cinematic-bg"></div>
    <canvas id="particles-canvas"></canvas>

    <header class="pt-20 pb-32 relative overflow-hidden z-10">
        <div class="absolute top-10 left-1/2 transform -translate-x-1/2 w-[600px] h-[600px] bg-white rounded-full mix-blend-overlay filter blur-[120px] opacity-40 pointer-events-none"></div>
        <div class="container mx-auto px-6 text-center relative z-20">
            <div class="mb-14 relative inline-block">
                <div class="logo-glow"></div>
                <div class="logo-card animate-glow-entrance">
                    <div class="flex flex-col items-center justify-center">
                        <img src="logo.png" alt="EvoluSer Logo" class="h-auto object-contain" style="max-height: 170px; max-width: 100%;" onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=EvoluSer&background=005691&color=fff&size=128';">
                    </div>
                </div>
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight text-white drop-shadow-2xl">EvoluciÃ³n Integral</h1>
            <div class="h-1.5 w-24 bg-gradient-to-r from-brandBlue to-brandGreen mx-auto rounded-full mb-8 shadow-lg"></div>
            <div id="slogan-container" class="neon-3d-wrapper text-lg md:text-2xl mt-4 mb-8 min-h-[50px] items-center tracking-widest"></div>
        </div>
    </header>

    <main class="container mx-auto px-4 -mt-24 relative z-30 mb-12 flex-grow">
        <div class="glass-card rounded-full shadow-2xl p-2 flex justify-center max-w-lg mx-auto mb-10 transform transition-all hover:scale-[1.01]">
            <button onclick="switchTab('carta')" id="btn-carta" class="flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider transition-all duration-500 bg-brandBlue text-white shadow-lg ring-4 ring-brandBlue/30"><i class="fas fa-file-alt mr-2"></i> Propuesta</button>
            <button onclick="switchTab('brochure')" id="btn-brochure" class="flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider transition-all duration-500 text-gray-500 hover:bg-white/50 hover:text-brandBlue"><i class="fas fa-th-large mr-2"></i> Servicios</button>
        </div>

        <div class="glass-card rounded-3xl shadow-2xl p-8 md:p-14 min-h-[600px] relative overflow-hidden transition-all duration-500 z-40" id="main-content-area">
            
            <div id="view-carta" class="max-w-5xl mx-auto">
                <div class="flex justify-between items-end border-b border-gray-300 pb-6 mb-8">
                    <div><span class="bg-gradient-to-r from-brandBlue to-brandBlueLight text-white text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-wider shadow-md">Propuesta Corporativa</span></div>
                    <div class="text-right"><p class="text-brandBlue font-bold text-sm">QUITO, ECUADOR</p><p class="text-gray-500 text-xs" id="currentDate"></p></div>
                </div>
                <div class="prose prose-lg text-gray-600 mx-auto leading-relaxed text-justify">
                    <h2 class="text-3xl font-heading font-bold text-gray-800 mb-2">Estimados Clientes,</h2>
                    <p class="text-xl text-brandBlue font-light mb-8">Presentamos una nueva forma de entender el crecimiento empresarial.</p>
                    <p class="mb-6">En un entorno empresarial cada vez mÃ¡s exigente, el crecimiento real solo ocurre cuando cuidamos lo mÃ¡s importante: <strong>las personas y el entorno que habitan</strong>.</p>
                    <p class="mb-6">Les presento a <strong>EvoluSer</strong>, no solo como proveedores, sino como sus aliados estratÃ©gicos. Entendemos que una empresa exitosa del siglo XXI debe cumplir cuatro requisitos innegociables: ser <span class="text-brandBlue font-semibold">Humana</span>, garantizar la <span class="text-gray-800 font-semibold">Seguridad y Salud Ocupacional</span>, ser <span class="text-brandGreen font-semibold">Sostenible</span> y <span class="text-brandAmber font-semibold">Productiva</span>.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 my-6 not-prose">
                        <div class="interactive-card bg-white/70 p-4 rounded-xl border border-blue-100 cursor-pointer group" onclick="openModal('humano')">
                            <div class="flex flex-col items-center text-center">
                                <div class="w-20 h-20 flex items-center justify-center mb-3"><i class="fas fa-users text-6xl metal-icon metal-blue animate-hug"></i></div>
                                <h4 class="font-bold text-gray-800 text-sm">Humano</h4>
                            </div>
                        </div>
                        <div class="interactive-card bg-white/70 p-4 rounded-xl border border-gray-200 cursor-pointer group" onclick="openModal('seguro')">
                            <div class="flex flex-col items-center text-center">
                                <div class="w-20 h-20 flex items-center justify-center mb-3"><i class="fas fa-shield-alt text-6xl metal-icon metal-gray"></i></div>
                                <h4 class="font-bold text-gray-800 text-sm">S.S.O.</h4>
                            </div>
                        </div>
                        <div class="interactive-card bg-white/70 p-4 rounded-xl border border-green-100 cursor-pointer group" onclick="openModal('sostenible')">
                            <div class="flex flex-col items-center text-center">
                                <div class="w-20 h-20 flex items-center justify-center mb-3"><i class="fas fa-leaf text-6xl metal-icon metal-green animate-leaf"></i></div>
                                <h4 class="font-bold text-gray-800 text-sm">Sostenible</h4>
                            </div>
                        </div>
                        <div class="interactive-card bg-white/70 p-4 rounded-xl border border-amber-100 cursor-pointer group" onclick="openModal('agro')">
                            <div class="flex flex-col items-center text-center">
                                <div class="w-20 h-20 flex items-center justify-center mb-3"><i class="fas fa-tractor text-6xl metal-icon metal-amber animate-tractor"></i></div>
                                <h4 class="font-bold text-gray-800 text-sm">Agroindustrial</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-brochure" class="hidden">
                <div class="text-center mb-12">
                    <span class="text-brandGreen font-bold tracking-widest uppercase text-xs bg-green-50 px-3 py-1 rounded-full">Nuestro Portafolio</span>
                    <h2 class="text-4xl font-heading font-bold text-gray-800 mb-4 mt-4">Soluciones Integrales</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 px-2">
                    <div class="bg-white/80 rounded-2xl p-6 shadow-lg h-full border-t-4 border-brandBlue flex flex-col items-center text-center">
                        <i class="fas fa-users text-5xl mb-4 metal-icon metal-blue"></i>
                        <h3 class="font-bold text-gray-800">HUMANO</h3>
                        <p class="text-xs text-gray-500 mt-2">GestiÃ³n del Talento y Cultura</p>
                    </div>
                    <div class="bg-white/80 rounded-2xl p-6 shadow-lg h-full border-t-4 border-gray-600 flex flex-col items-center text-center">
                        <i class="fas fa-user-shield text-5xl mb-4 metal-icon metal-gray"></i>
                        <h3 class="font-bold text-gray-800">S.S.O.</h3>
                        <p class="text-xs text-gray-500 mt-2">Seguridad y Salud Laboral</p>
                    </div>
                    <div class="bg-white/80 rounded-2xl p-6 shadow-lg h-full border-t-4 border-brandGreen flex flex-col items-center text-center">
                        <i class="fas fa-leaf text-5xl mb-4 metal-icon metal-green"></i>
                        <h3 class="font-bold text-gray-800">SOSTENIBLE</h3>
                        <p class="text-xs text-gray-500 mt-2">Ambiente y Sostenibilidad</p>
                    </div>
                    <div class="bg-white/80 rounded-2xl p-6 shadow-lg h-full border-t-4 border-brandAmber flex flex-col items-center text-center">
                        <i class="fas fa-tractor text-5xl mb-4 metal-icon metal-amber"></i>
                        <h3 class="font-bold text-gray-800">AGRO</h3>
                        <p class="text-xs text-gray-500 mt-2">Calidad Agroindustrial</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- VENTANA CHAT -->
    <div id="ai-chat-window" class="fixed bottom-28 right-6 w-80 md:w-96 glass-card rounded-2xl flex flex-col transition-all duration-300 transform scale-0 origin-bottom-right z-[90] hidden" style="height: 450px;">
        <div class="bg-gradient-to-r from-brandBlue to-brandGreen p-4 rounded-t-2xl flex justify-between items-center relative overflow-hidden">
            <div class="absolute inset-0 bg-white opacity-10 animate-pulse-slow"></div>
            <div class="flex items-center gap-3 z-10">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg overflow-hidden">
                    <img src="logo.png" alt="Logo" class="w-full h-full object-contain p-1" onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=EvoluSer&background=005691&color=fff&size=128';">
                </div>
                <div><h4 class="text-white font-bold text-sm">Soy Ev (IA)</h4><p class="text-xs text-white/80">Tu copiloto Evonauta</p></div>
            </div>
            <button onclick="toggleChat()" class="text-white hover:text-gray-200 z-10"><i class="fas fa-times text-xl"></i></button>
        </div>
        <ul id="chat-box" class="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide bg-white/60">
            <li class="flex justify-start">
                <div class="bg-white text-gray-700 p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[85%] text-sm border border-gray-100">
                    Â¡Hola! ðŸ‘‹ Soy Ev, la IA experta de EvoluSer. Â¿En quÃ© puedo ayudarte hoy?
                </div>
            </li>
        </ul>
        <div class="p-3 bg-white/80 border-t border-gray-100 rounded-b-2xl">
            <div class="flex items-center gap-2 bg-gray-50 rounded-full px-4 py-2 border border-gray-200">
                <textarea id="chat-input" rows="1" class="flex-1 bg-transparent border-none outline-none text-sm resize-none text-gray-700" placeholder="PregÃºntame algo..."></textarea>
                <button id="send-btn" class="text-brandBlue hover:text-brandGreen"><i class="fas fa-paper-plane"></i></button>
            </div>
            <div class="text-[10px] text-center text-gray-400 mt-1">Potenciado por Grok xAI</div>
        </div>
    </div>
    
    <!-- AVATAR -->
    <div id="avatar-container" class="fixed bottom-6 right-6 z-[100] flex flex-col items-end animate-pop-in">
        <div id="avatar-bubble" onclick="toggleChat()" class="chat-bubble mb-8 max-w-[280px] animate-float cursor-pointer">
            <h4 class="font-bold text-brandBlue text-sm mb-1">Â¡Hola, Evonauta! Soy Ev</h4>
            <p class="text-xs text-gray-600">Haz clic para chatear conmigo.</p>
        </div>
        <div id="avatar-wrapper" onclick="toggleChat()" class="relative w-36 h-36 cursor-pointer group animate-float-avatar">
            <img src="imagen6.png" alt="Asistente EvoluSer" class="w-full h-full object-contain filter drop-shadow-2xl transition-transform duration-300 group-hover:scale-110" onerror="this.style.display='none'; document.getElementById('avatar-fallback').style.display='flex';">
            <div id="avatar-fallback" class="hidden w-full h-full bg-brandBlue rounded-full items-center justify-center text-white shadow-xl"><i class="fas fa-robot text-4xl"></i></div>
        </div>
    </div>

    <!-- MODAL (Simplificado para el ejemplo) -->
    <div id="service-modal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/70 backdrop-blur-sm p-4">
        <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full p-8 relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400"><i class="fas fa-times text-xl"></i></button>
            <h3 id="modal-title" class="text-2xl font-bold mb-4">TÃ­tulo</h3>
            <p id="modal-desc" class="text-gray-600">DescripciÃ³n aquÃ­...</p>
        </div>
    </div>

    <script>
        // --- CURSOR ---
        const cursor = document.getElementById('custom-cursor');
        document.addEventListener('mousemove', (e) => { cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`; });

        // --- NAVEGACIÃ“N ---
        function switchTab(tabName) {
            document.getElementById('view-carta').classList.toggle('hidden', tabName !== 'carta');
            document.getElementById('view-brochure').classList.toggle('hidden', tabName !== 'brochure');
            document.getElementById('btn-carta').className = tabName === 'carta' ? 'flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider bg-brandBlue text-white shadow-lg' : 'flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider text-gray-500 hover:bg-white/50';
            document.getElementById('btn-brochure').className = tabName === 'brochure' ? 'flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider bg-brandBlue text-white shadow-lg' : 'flex-1 py-3 px-6 rounded-full text-sm font-bold uppercase tracking-wider text-gray-500 hover:bg-white/50';
        }

        // --- SLOGAN ---
        function createNeonText(text) {
            const container = document.getElementById('slogan-container');
            text.split(' ').forEach(word => {
                const wordSpan = document.createElement('span'); wordSpan.className = 'neon-word';
                word.split('').forEach((char, i) => { const span = document.createElement('span'); span.innerText = char; span.className = 'neon-letter'; span.style.animationDelay = `${i * 0.1}s`; wordSpan.appendChild(span); });
                container.appendChild(wordSpan);
            });
        }
        document.addEventListener('DOMContentLoaded', () => { createNeonText("POTENCIAR EL SER, PROTEGER LA VIDA"); launchWanderingRocket(); });

        // --- LÃ“GICA DEL CHATBOT CON GROK ---
        const chatWindow = document.getElementById('ai-chat-window');
        const chatBox = document.getElementById('chat-box');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const avatarBubble = document.getElementById('avatar-bubble');
        
        // El API Key se recomienda manejarlo vÃ­a variable de entorno en Render.
        // Si no tienes un build tool, puedes pegarlo aquÃ­ temporalmente para pruebas.
        const GROK_KEY = "TU_API_KEY_DE_GROK"; 

        const SYSTEM_PROMPT = `Eres Ev, la asistente virtual de EvoluSer. 
        MisiÃ³n: Ayudar a los 'Evonautas' (clientes). 
        Expertos: Humano (Nury Echeverria), SSO/Ambiente (Christian Ortega), Agro (Lilian Eras). 
        Contacto: WhatsApp +593 98 390 0050. 
        Estilo: Profesional, empÃ¡tico y directo. No menciones otras empresas.`;

        function toggleChat() {
            const isHidden = chatWindow.classList.contains('hidden');
            chatWindow.classList.toggle('hidden', !isHidden);
            setTimeout(() => chatWindow.classList.toggle('scale-0', !isHidden), 10);
            avatarBubble.classList.toggle('opacity-0', isHidden);
        }

        async function generateResponse(userText) {
            const loading = document.createElement("li");
            loading.className = "flex justify-start";
            loading.innerHTML = `<div class="bg-gray-100 p-3 rounded-2xl text-xs"><i class="fas fa-spinner fa-spin mr-2"></i>Ev estÃ¡ pensando...</div>`;
            chatBox.appendChild(loading);
            chatBox.scrollTo(0, chatBox.scrollHeight);

            try {
                const response = await fetch("https://api.x.ai/v1/chat/completions", {
                    method: "POST",
                    headers: { 
                        "Content-Type": "application/json", 
                        "Authorization": `Bearer ${GROK_KEY}` 
                    },
                    body: JSON.stringify({
                        model: "grok-beta",
                        messages: [
                            { role: "system", content: SYSTEM_PROMPT },
                            { role: "user", content: userText }
                        ]
                    })
                });

                const json = await response.json();
                chatBox.removeChild(loading);
                
                const reply = json.choices[0].message.content;
                appendMessage(reply, "incoming");
            } catch (err) {
                chatBox.removeChild(loading);
                appendMessage("Lo siento, Ingenio, mi conexiÃ³n con la central de Evonautas fallÃ³. Â¿Intentamos de nuevo?", "incoming");
            }
        }

        function appendMessage(text, type) {
            const li = document.createElement("li");
            li.className = type === "outgoing" ? "flex justify-end" : "flex justify-start";
            const div = document.createElement("div");
            div.className = type === "outgoing" ? "bg-brandBlue text-white p-3 rounded-2xl rounded-tr-none shadow-md max-w-[85%] text-sm" : "bg-white text-gray-700 p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[85%] text-sm border border-gray-100";
            div.innerText = text;
            li.appendChild(div);
            chatBox.appendChild(li);
            chatBox.scrollTo(0, chatBox.scrollHeight);
        }

        function handleChat() {
            const text = chatInput.value.trim();
            if(!text) return;
            appendMessage(text, "outgoing");
            chatInput.value = "";
            generateResponse(text);
        }

        sendBtn.onclick = handleChat;
        chatInput.onkeydown = (e) => { if(e.key === "Enter") handleChat(); };

        // --- ROCKET ---
        function launchWanderingRocket() {
            const rocket = document.createElement('div'); rocket.className = 'wandering-rocket'; rocket.innerHTML = '<i class="fas fa-rocket"></i>'; document.body.appendChild(rocket);
            function fly() {
                const x = Math.random() * window.innerWidth; const y = Math.random() * window.innerHeight;
                rocket.style.opacity = '0.5'; rocket.style.left = `${x}px`; rocket.style.top = `${y}px`;
                setTimeout(fly, 20000);
            }
            fly();
        }

        function openModal(type) { 
            const titles = { humano: "EvoluSer Humano", seguro: "EvoluSer SSO", sostenible: "EvoluSer Sostenible", agro: "EvoluSer Agro" };
            document.getElementById('modal-title').innerText = titles[type];
            document.getElementById('service-modal').classList.remove('hidden');
            document.getElementById('service-modal').classList.add('flex');
        }
        function closeModal() { document.getElementById('service-modal').classList.add('hidden'); }
    </script>
</body>
</html>
